<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="By Wouter &amp; Ioana" />


<title>COVID-19 R-assignment</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="script.js" type="text/javascript"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R-Workshop</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="covid.html">COVID-19</a>
    </li>
    <li>
      <a href="netflix.html">Netflix</a>
    </li>
    <li>
      <a href="whatsapp.html">WhatsApp</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="files/cheatsheet.pdf">Cheatsheet</a>
    </li>
    <li>
      <a href="files/presentation.pdf">Presentation</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">COVID-19 R-assignment</h1>
<h4 class="author">By Wouter &amp; Ioana</h4>
<h4 class="date">19/11/2020</h4>

</div>


<p>In this assignment you will analyze the COVID-19 cases in the Netherlands using different types of tables and graphs.</p>
<div id="download-and-import-dataset" class="section level1 tabset tabset-pills">
<h1>1. Download and import dataset</h1>
<div id="question" class="section level2">
<h2>Question</h2>
<p>Please download the dataset <a href="https://data.rivm.nl/covid-19/COVID-19_casus_landelijk.csv">COVID-19_casus_landelijk.csv</a>.<br />
Import this dataset into R and save it in a variable named <code>COVID_cases</code>.<br />
After this, view the dataset to make sure the import went correctly.</p>
<p>The first few lines of the raw file look like this:</p>
<pre class="scrollx"><code>Date_file;Date_statistics;Date_statistics_type;Agegroup;Sex;Province;Hospital_admission;Deceased;Week_of_death;Municipal_health_service
2020-11-17 10:00:00;2020-01-01;DOO;40-49;Female;Noord-Holland;No;No;;GGD Amsterdam
2020-11-17 10:00:00;2020-01-12;DOO;60-69;Female;Noord-Brabant;No;No;;GGD Hart voor Brabant
2020-11-17 10:00:00;2020-01-20;DOO;50-59;Female;Gelderland;No;No;;GGD Gelderland-Zuid
2020-11-17 10:00:00;2020-01-29;DOO;80-89;Male;Overijssel;No;No;;GGD Regio Twente
2020-11-17 10:00:00;2020-01-31;DOO;80-89;Male;Noord-Brabant;Yes;Yes;202015;GGD Brabant Zuid-Oost </code></pre>
</div>
<div id="hint-1" class="section level2">
<h2>Hint 1</h2>
<p>To check if your import went correctly, you can view the dataset using the <code>View()</code> command. You can check how to use that command using:</p>
<pre class="r"><code>?View</code></pre>
</div>
<div id="hint-2" class="section level2">
<h2>Hint 2</h2>
<p>You can see that this dataset is a CSV-file.<br />
Try to find out how you can import a csv file in R, by googling <a href="https://www.google.com/search?q=import+csv-file+in+R"><em>import CSV-file in R</em></a>.</p>
</div>
<div id="hint-3" class="section level2">
<h2>Hint 3</h2>
<p>If you get the error message below, make sure you set the working directory to the directory in which the file is</p>
<pre class="error"><code>Error in file(file, &quot;rt&quot;) : cannot open the connection
In addition: Warning message:
In file(file, &quot;rt&quot;) :
  cannot open file &#39;COVID-19_casus_landelijk.csv&#39;: No such file or directory</code></pre>
<p>If you do not know how to set your working directory, try googling <a href="https://www.google.com/search?q=set+working+directory+in+R"><em>set working directory in R</em></a></p>
</div>
<div id="hint-4" class="section level2">
<h2>Hint 4</h2>
<p>You can use the function <code>read.csv()</code> to import a CSV-file. Use <code>?read.csv</code> to look at the documentation of this function, and look at some examples of how it is used, and look through the arguments to see if you might need one of them.</p>
<pre class="r"><code>?read.csv</code></pre>
</div>
<div id="answer" class="section level2">
<h2>Answer</h2>
<p>First, set the working directory to the place where your file is using the <code>setwd()</code> command. You can do this by putting the path of this directory in the code. Make sure to change all backslashes (\) to forward slashes (/) in that case. You can also select the working directory manually, by using the <code>choose.dir()</code> function.</p>
<pre class="r"><code>setwd(&quot;C:/users/yourname/downloads&quot;) #Putting the path in the code
setwd(choose.dir()) #Selecting the working directory by hand</code></pre>
<p>After this, you can import the dataset. Because it is a CSV-file, you use the function <code>read.csv</code>. You can see in the file that different collumns are seperated by a semi-colon (;). Therefore, you need to set the <code>sep</code>-parameter to <code>";"</code>.</p>
<pre class="r"><code>COVID_cases &lt;- read.csv(&quot;COVID-19_casus_landelijk.csv&quot;, sep=&quot;;&quot;)</code></pre>
<p>To view the dataset, you can then use the <code>View()</code> command</p>
<pre class="r"><code>View(COVID_cases)</code></pre>
</div>
</div>
<div id="import-packages" class="section level1 tabset tabset-pills">
<h1>2. Import Packages</h1>
<div id="question-1" class="section level2">
<h2>Question</h2>
<p>In this assignment, you will need certain functions that are part of the <code>tidyverse</code> package. Please try to import that package.</p>
</div>
<div id="hint-1-1" class="section level2">
<h2>Hint 1</h2>
<p>Make sure that you install the package first before importing it.<br />
When installing it, you might see a warning like this</p>
<pre class="error"><code>WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/</code></pre>
<p>This does not mean that the installation failed. It is not necessary to install Rtools. If the istallation gives the message below, your installation went successfully</p>
<pre><code>package ‘tidyverse’ successfully unpacked and MD5 sums checked</code></pre>
<p>If you do not know how to install a package, try googling <a href="https://www.google.com/search?q=install+packages+in+R"><em>install packages in R</em></a></p>
</div>
<div id="hint-2-1" class="section level2">
<h2>Hint 2</h2>
<p>When importing a package, you might get this message:</p>
<pre><code>-- Attaching packages --------------------------------------- tidyverse 1.3.0 --
v ggplot2 3.3.2     v purrr   0.3.4
v tibble  3.0.3     v dplyr   1.0.2
v tidyr   1.1.2     v stringr 1.4.0
v readr   1.4.0     v forcats 0.5.0
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()</code></pre>
<p>This does not mean the import failed. It just means that R imports several other packagestoo. These are packages that tidyverse needs to operate (dependencies). Sometimes, the same function name is used in multiple packages. That means that R will overwrite one function with another. These are conflicts. This is usually not a problem however, so you don’t need to do anything with that.<br />
If you do not know how to import a package, try googling <a href="https://www.google.com/search?q=install+packages+in+R"><em>import packages in R</em></a></p>
</div>
<div id="answer-1" class="section level2">
<h2>Answer</h2>
<p>If you have not used this library before, first install the package on your computer</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<pre><code>## Installing package into &#39;C:/Users/woute/Documents/R/win-library/4.0&#39;
## (as &#39;lib&#39; is unspecified)</code></pre>
<pre><code>## package &#39;tidyverse&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\woute\AppData\Local\Temp\RtmpM7DXQl\downloaded_packages</code></pre>
<p>After this, you need to import the library</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.4     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
</div>
</div>
<div id="explore-the-dataset" class="section level1 tabset tabset-pills">
<h1>3. Explore the dataset</h1>
<div id="question-2" class="section level2">
<h2>Question</h2>
<p>Explore the imported dataset. You can do this in various different ways.</p>
<p>Look at these description of the dataset and look at the different variables.</p>
<p>Try to find out:</p>
<ul>
<li>How many observations there are<br />
</li>
<li>How many variables there are</li>
<li>The names of the variables</li>
<li>The data-type of the variables<br />
</li>
<li>Some of the values of the variables</li>
</ul>
</div>
<div id="description" class="section level2">
<h2>Description</h2>
<p>This file contains the following characteristics per positively tested case in the Netherlands: Date for statistics, Age group, Gender, Hospitalization, Death, Week of death, Province, Reporting GGD</p>
<p>The file is structured as follows: A record for every laboratory confirmed COVID-19 patient in the Netherlands, since the first COVID-19 report in the Netherlands on 27/02/2020 (Date for statistics may be earlier). The file is refreshed daily at 16:00, based on the data registered at 10:00 that day in the national system for notifiable infectious diseases (Osiris AIZ).</p>
<p>Description of the variables</p>
<p><strong>Date_file</strong>: Date and time on which the data was published by RIVM</p>
<p><strong>Date_statistics</strong>: Date for statistic; first day of illness, if not known, date lab positive, if not known, report date to GGD (format: yyyy-mm-dd)</p>
<p><strong>Date_statistics_type</strong>: Type of date that was available for date for the variable “Date for statistics”, where:<br />
<em>DOO</em> = Date of disease onset: First day of illness as reported by GGD. Note: it is not always known whether this first day of illness actually involved Covid-19.<br />
<em>DPL</em> = Date of first Positive Labresult: Date of the (first) positive lab result.<br />
<em>DON</em> = Date of Notification: Date on which the notification was received by the GGD.</p>
<p><strong>Agegroup</strong>: Age group during life; 0-9, 10-19, …, 90+; upon death &lt;50, 50-59, 60-69, 70-79, 80-89, 90+, Unknown</p>
<p><strong>Sex</strong>: Gender; Unknown, Male, Female</p>
<p><strong>Province</strong>: Name of the province (based on the patient’s whereabouts)</p>
<p><strong>Hospital_admission</strong>: Hospitalization. Unknown, Yes, No. As of May 1, 2020, it will be inquired whether the indication of hospitalization was Covid-19 related. If not, the value of this column is “No”.</p>
<p><strong>Deceased</strong>: Death. Unknown = Unknown, Yes = Yes, No = No.</p>
<p><strong>Week of Death</strong>: Week of death. YYYYWW according to ISO week notation (start on Monday to Sunday)</p>
<p><strong>Municipal_health_service</strong>: GGD that made the report.</p>
</div>
<div id="hint-1-2" class="section level2">
<h2>Hint 1</h2>
<p>Try googling for <a href="https://www.google.com/search?q=explore+dataset+in+R"><em>explore dataset in R</em></a></p>
</div>
<div id="hint-2-2" class="section level2">
<h2>Hint 2</h2>
<p>To explore a dataset, you can use one, for example, the <code>head()</code>, <code>dim()</code>, <code>summary()</code>, <code>glimpse()</code>, <code>names()</code> and <code>class()</code> functions. Use <code>?function_name</code> to find out how these functions work, and test them out to see which ones you like most.</p>
</div>
<div id="answer-2" class="section level2">
<h2>Answer</h2>
<p>There are multiple ways to explore the dataset. The easiest way (in my opinion) is the <code>glimse()</code> function.</p>
<pre class="r"><code>glimpse(COVID_cases)</code></pre>
<pre><code>## Rows: 557,224
## Columns: 10
## $ Date_file                &lt;chr&gt; &quot;2020-12-06 10:00:00&quot;, &quot;2020-12-06 10:00:0...
## $ Date_statistics          &lt;chr&gt; &quot;2020-01-01&quot;, &quot;2020-01-18&quot;, &quot;2020-01-20&quot;, ...
## $ Date_statistics_type     &lt;chr&gt; &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, ...
## $ Agegroup                 &lt;chr&gt; &quot;40-49&quot;, &quot;60-69&quot;, &quot;50-59&quot;, &quot;80-89&quot;, &quot;80-89...
## $ Sex                      &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Mal...
## $ Province                 &lt;chr&gt; &quot;Noord-Holland&quot;, &quot;Noord-Holland&quot;, &quot;Gelderl...
## $ Hospital_admission       &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;...
## $ Deceased                 &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;,...
## $ Week_of_death            &lt;int&gt; NA, NA, NA, NA, 202015, NA, NA, NA, NA, NA...
## $ Municipal_health_service &lt;chr&gt; &quot;GGD Amsterdam&quot;, &quot;GGD Kennemerland&quot;, &quot;GGD ...</code></pre>
<p>As you see, it gives you the amount of rows (variables) and columns (observations). For each of the variables, it gives you the name, data-type (<em><code>&lt;chr&gt;</code></em>,<em><code>&lt;int&gt;</code></em>), and some of the values. There are also other functions you can use:</p>
<pre class="r"><code>head(COVID_cases)
# Shows you the first 6 observations from the dataset

dim(COVID_cases)
# Gives you the amount of observations and variables

summary(COVID_cases)
# Gives you the amount of observations and data-type for each variable. For numeric variables, it will also give you the mean, min, max, median, and quartiles.

names(COVID_cases)
# Gives you the names of all the variables in the dataframe

class(COVID_cases$Date_file)
# Gives you the data-type of the `Data_file` variable in the dataframe</code></pre>
</div>
</div>
<div id="clean-the-dataset" class="section level1">
<h1>4. Clean the dataset</h1>
<p>Now that we know how the dataset looks, we need to clean the dataset. In this process, we will only keep the relevant information, make sure that values are coded correctly, a==nd that everything has the right data-type.</p>
<div id="select-relevant-variables" class="section level2 tabset tabset-pills">
<h2>4.1 Select relevant variables</h2>
<div id="question-3" class="section level3">
<h3>Question</h3>
<p>For our analysis, we don’t need the date and time on which the data was published by RIVM, only the date of the statistic itself. Remove this variable from the dataset, and save this clean dataset to a variable called <code>COVID_cases_clean</code>.</p>
<p>You can use the <code>glimpse()</code> command, to check if you did it correctly.</p>
<pre class="r"><code>glimpse(COVID_cases_clean)</code></pre>
</div>
<div id="hint-1-3" class="section level3">
<h3>Hint 1</h3>
<p>If you do not know how to select certain columns of a dataframe, try googling <a href="https://www.google.com/search?q=R+select+column+in+dataframe"><em>R select column in dataframe</em></a></p>
</div>
<div id="hint-2-3" class="section level3">
<h3>Hint 2</h3>
<p>To select certain columns, you can use the <code>select()</code> function. Use <code>?select</code> to find out how this function works. You can select all the variable that you want to keep, but also specifically select variables that you want to leave out.</p>
</div>
<div id="answer-3" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean &lt;- COVID_cases %&gt;%
  select(!Date_file)</code></pre>
<p>The <code>!</code> means that you select all values except <code>Data_file</code>. It is also possible to just fill in all variables you want to keep. In that case, do not use the <code>!</code>.</p>
<p>Make sure that the new dataset without this column is saved again in the variable.</p>
<p>It is also possible to use the <code>subset()</code> function, but you do not need to know how that one works, but if you used it that is also correct.</p>
<p>If you use <code>glimpse()</code> to check your dataset, your result should look like this:</p>
<pre class="r"><code>glimpse(COVID_cases_clean)</code></pre>
<pre><code>## Rows: 557,224
## Columns: 9
## $ Date_statistics          &lt;chr&gt; &quot;2020-01-01&quot;, &quot;2020-01-18&quot;, &quot;2020-01-20&quot;, ...
## $ Date_statistics_type     &lt;chr&gt; &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, ...
## $ Agegroup                 &lt;chr&gt; &quot;40-49&quot;, &quot;60-69&quot;, &quot;50-59&quot;, &quot;80-89&quot;, &quot;80-89...
## $ Sex                      &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Mal...
## $ Province                 &lt;chr&gt; &quot;Noord-Holland&quot;, &quot;Noord-Holland&quot;, &quot;Gelderl...
## $ Hospital_admission       &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;...
## $ Deceased                 &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;,...
## $ Week_of_death            &lt;int&gt; NA, NA, NA, NA, 202015, NA, NA, NA, NA, NA...
## $ Municipal_health_service &lt;chr&gt; &quot;GGD Amsterdam&quot;, &quot;GGD Kennemerland&quot;, &quot;GGD ...</code></pre>
</div>
</div>
<div id="recode-values" class="section level2 tabset tabset-pills">
<h2>4.2 Recode values</h2>
<div id="question-4" class="section level3">
<h3>Question</h3>
<p>As you see, the values for <code>Hospital_admission</code> and <code>Deceased</code> are <code>"Yes"</code>, <code>"No"</code> and <code>"Unknown"</code>. These values are easy for us to understand, but not for R, since it doesn’t understand language. Therefore, R will just treat this as text, and will not know that, for example, values with the value <code>"Unknown"</code> are missing. Therefore you need to recode these variables in the clean dataset. Please recode <code>"Yes"</code> to <code>TRUE</code>, <code>"No"</code> to <code>FALSE</code>, and all other values to <code>NA</code> (Not available).</p>
<p>Try to modify your previous command so it can both be done at once. You can use the <code>glimpse()</code> command, to check if you did it correctly.</p>
</div>
<div id="hint-1-4" class="section level3">
<h3>Hint 1</h3>
<p>To recode a variable, you can use the <code>recode()</code> function. Use <code>?recode</code> to find out how this function works.</p>
</div>
<div id="hint-2-4" class="section level3">
<h3>Hint 2</h3>
<p>To perform multiple functions after each other, you can use the pipe command <code>%&gt;%</code>.</p>
</div>
<div id="hint-3-1" class="section level3">
<h3>Hint 3</h3>
<p>To make changes to one or multiple columns of a dataframe, you can use the <code>mutate()</code> command. Use <code>?mutate</code> to find out how this function works.</p>
</div>
<div id="hint-4-1" class="section level3">
<h3>Hint 4</h3>
<p>Make sure you type <code>TRUE</code>, <code>FALSE</code> and <code>NA</code> in capital letters without quotation marks, so R can understand it. You can also just type <code>T</code> for <code>TRUE</code> and <code>F</code> for <code>FALSE</code>.</p>
</div>
<div id="hint-5" class="section level3">
<h3>Hint 5</h3>
<p>You can use the <code>.default</code> parameter to give a value to all values you didn’t specify.</p>
</div>
<div id="answer-4" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean &lt;- COVID_cases %&gt;%
  select(!Date_file) %&gt;%
  mutate(
    Deceased = Deceased %&gt;% recode(Yes = TRUE, No = FALSE, .default = NA),
    Hospital_admission = Hospital_admission %&gt;% recode(Yes = T, No = F, .default = NA)
  )</code></pre>
<p>If you want to perform this action in seperate commands, it is also possible to do it like this:</p>
<pre class="r"><code>COVID_cases_clean$Deceased = recode(COVID_cases$Deceased, Yes = TRUE, No = FALSE, .default = NA)
COVID_cases_clean$Hospital_admission = recode(COVID_cases$Hospital_admission, Yes = TRUE, No = FALSE, .default = NA)</code></pre>
<p>If you use <code>glimpse()</code> to check your dataset, your result should look like this:</p>
<pre class="r"><code>glimpse(COVID_cases_clean)</code></pre>
<pre><code>## Rows: 557,224
## Columns: 9
## $ Date_statistics          &lt;chr&gt; &quot;2020-01-01&quot;, &quot;2020-01-18&quot;, &quot;2020-01-20&quot;, ...
## $ Date_statistics_type     &lt;chr&gt; &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, ...
## $ Agegroup                 &lt;chr&gt; &quot;40-49&quot;, &quot;60-69&quot;, &quot;50-59&quot;, &quot;80-89&quot;, &quot;80-89...
## $ Sex                      &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Mal...
## $ Province                 &lt;chr&gt; &quot;Noord-Holland&quot;, &quot;Noord-Holland&quot;, &quot;Gelderl...
## $ Hospital_admission       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, T...
## $ Deceased                 &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, F...
## $ Week_of_death            &lt;int&gt; NA, NA, NA, NA, 202015, NA, NA, NA, NA, NA...
## $ Municipal_health_service &lt;chr&gt; &quot;GGD Amsterdam&quot;, &quot;GGD Kennemerland&quot;, &quot;GGD ...</code></pre>
</div>
</div>
<div id="convert-to-correct-datatype" class="section level2 tabset tabset-pills">
<h2>4.3 Convert to correct datatype</h2>
<div id="question-5" class="section level3">
<h3>Question</h3>
<p>The variable <code>Date_statistics</code> has the datatype <em><code>&lt;char&gt;</code></em> but clearly should be a <em><code>&lt;date&gt;</code></em>. The variable <code>Week_of_death</code> has the datatype <em><code>&lt;int&gt;</code></em>, but should also be a <em><code>&lt;date&gt;</code></em>, but is currently expressed in week numbers. Convert these column to a date in the clean dataset.</p>
<p>Try to modify your previous command so it can all be done at once. You can use the <code>glimpse()</code> command, to check if you did it correctly.</p>
</div>
<div id="hint-1-5" class="section level3">
<h3>Hint 1</h3>
<p>If you do not know how to convert a <em><code>&lt;char&gt;</code></em> to a <em><code>&lt;date&gt;</code></em>, try googling <a href="https://www.google.com/search?q=R+convert+character+to+date"><em>R convert character to date</em></a></p>
<p>If you do not know how to convert an <em><code>&lt;int&gt;</code></em> to a <em><code>&lt;date&gt;</code></em>, try googling <a href="https://www.google.com/search?q=R+convert+int+to+date"><em>R convert int to date</em></a></p>
</div>
<div id="hint-2-5" class="section level3">
<h3>Hint 2</h3>
<p>The <code>as.Date()</code> command can be used to convert a <em><code>&lt;char&gt;</code></em> to a <em><code>&lt;date&gt;</code></em>. Use <code>?as.Date</code> to find out how this function works.</p>
<p>It is not possible to convert an <em><code>&lt;int&gt;</code></em> directly to a <em><code>&lt;date&gt;</code></em> using this function. Therefore, you can try to convert it to a <em><code>&lt;char&gt;</code></em> first and convert that to a <em><code>&lt;date&gt;</code></em>. If you do not know how to convert an <em><code>&lt;int&gt;</code></em> to a <em><code>&lt;char&gt;</code></em>, try googling <a href="https://www.google.com/search?q=R+convert+int+to+char"><em>R convert int to char</em></a></p>
</div>
<div id="hint-3-2" class="section level3">
<h3>Hint 3</h3>
<p>The <code>as.Date()</code> function accepts a <code>format</code> argument. In this argument, you can specify how the dates are written down. For example, the format for a date like <code>"2020-11-19"</code> is <code>"%Y-%m-%d"</code>. The formatting of the <code>Week_of_death</code> is more difficult. For that variable, the value <code>202047</code> stands for <em>Week 47 of year 2020</em>.</p>
<p>The documentation mentions that the processing of the format is done via <code>strptime()</code>, whose help page describes available conversion specifications. Therefore, use <code>?strptime</code> to find out how to describe these week numbers in a proper format.</p>
</div>
<div id="answer-5" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean &lt;- COVID_cases %&gt;%
  select(!Date_file) %&gt;%
  mutate(
    Deceased = Deceased %&gt;% recode(Yes = T, No = F, .default = NA),
    Hospital_admission = Hospital_admission %&gt;% recode(Yes = T, No = F, .default = NA),
    Date_statistics = Date_statistics %&gt;% as.Date(),
    Week_of_death = Week_of_death %&gt;% as.character() %&gt;% as.Date(&quot;%Y%W&quot;)
  )</code></pre>
<p>If you want to perform this action separately, it is also possible to do</p>
<pre class="r"><code>COVID_cases_clean$Date_statistics &lt;- as.Date(COVID_cases$Date_statistics)
COVID_cases_clean$Date_statistics &lt;- as.Date(COVID_cases$Date_statistics)</code></pre>
<p>If you use <code>glimpse()</code> to check your dataset, your result should look like this:</p>
<pre class="r"><code>glimpse(COVID_cases_clean)</code></pre>
<pre><code>## Rows: 557,224
## Columns: 9
## $ Date_statistics          &lt;date&gt; 2020-01-01, 2020-01-18, 2020-01-20, 2020-...
## $ Date_statistics_type     &lt;chr&gt; &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, &quot;DOO&quot;, ...
## $ Agegroup                 &lt;chr&gt; &quot;40-49&quot;, &quot;60-69&quot;, &quot;50-59&quot;, &quot;80-89&quot;, &quot;80-89...
## $ Sex                      &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Mal...
## $ Province                 &lt;chr&gt; &quot;Noord-Holland&quot;, &quot;Noord-Holland&quot;, &quot;Gelderl...
## $ Hospital_admission       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, T...
## $ Deceased                 &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, F...
## $ Week_of_death            &lt;date&gt; NA, NA, NA, NA, 2020-12-06, NA, NA, NA, N...
## $ Municipal_health_service &lt;chr&gt; &quot;GGD Amsterdam&quot;, &quot;GGD Kennemerland&quot;, &quot;GGD ...</code></pre>
</div>
</div>
</div>
<div id="visualize-data" class="section level1">
<h1>5. Visualize data</h1>
<p>Now that all the data is clean it is ready to be analyzed.</p>
<div id="create-barchart" class="section level2 tabset tabset-pills">
<h2>5.1 Create barchart</h2>
<div id="question-6" class="section level3">
<h3>Question</h3>
<p>Use the <code>ggplot()</code> function to create a barchart to show the age distribution of COVID-cases in the Netherlands.</p>
</div>
<div id="hint-1-6" class="section level3">
<h3>Hint 1</h3>
<p>To make plots with <code>ggplot</code> you always need at least two functions. The first function you need is <code>ggplot()</code>. This is required for every plot you make. This function basically creates the axis for the plot. As an argument for this function you need to put in an aestetics map (<code>aes()</code>). With this map, you tell R which visual elements represent which data. You can link variables, for example, to the <code>x</code>, <code>y</code>, <code>color</code> and <code>fill</code> of your graph.</p>
<p>Now that you created the background with <code>ggplot()</code> you can add layers to it with the actual graphs using the <code>+</code> sign. For example, you can use <code>geom_point()</code> for a scatterplot, <code>geom_line()</code> for a line, <code>geom_smooth()</code> for a smooth line, or <code>geom_bar()</code> for a bar chart. You can also add multiple layers with a <code>+</code> in between. To find out which function you should use for a bar chart, try googling <a href="https://www.google.com/search?q=R+ggplot+bar+chart"><em>R ggplot bar chart</em></a></p>
</div>
<div id="hint-2-6" class="section level3">
<h3>Hint 2</h3>
<p>So imagine you have a dataset called <code>data</code> with 3 variables. The gender, a grade for module 1 and a grade for module 2.</p>
<pre class="r"><code>data &lt;- data.frame(
  gender = c(&quot;Male&quot;,&quot;Male&quot;,&quot;Female&quot;,&quot;Male&quot;,&quot;Male&quot;,&quot;Female&quot;,&quot;Female&quot;,&quot;Female&quot;,&quot;Female&quot;,&quot;Male&quot;),
  grade_m1 = c(4.5,9.0,2.0,3.0,6.7,7.7,8.3,2.2,4.4,9.9),
  grade_m2 = c(3.3,7.6,2.2,5.5,4.3,6.6,9.4,1.3,5.6,8.3)
)</code></pre>
<p>If you want to make a scatterplot with the grade of module 1 on the x-asis, and the grade of module 2 on the y-axis, and different colors for each gender, I would use the following code:</p>
<pre class="r"><code>data %&gt;%
  ggplot(aes(x = grade_m1, y = grade_m2, color = gender)) +
  geom_point()</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="hint-3-3" class="section level3">
<h3>Hint 3</h3>
<p>A bar chart is a univariate analysis method. That means that you only have to define which variable to put on the x-axis. On the y-axis, it will automatically put the amount of observations.</p>
</div>
<div id="hint-4-2" class="section level3">
<h3>Hint 4</h3>
<p>Make a histogram using <code>ggplot() + geom_bar()</code> and put the variable <code>Agegroup</code> on the x-axis.</p>
</div>
<div id="answer-6" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean %&gt;%
  ggplot(aes(x = Agegroup)) +
  geom_bar()</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
</div>
<div id="filter-province" class="section level2 tabset tabset-pills">
<h2>5.2 Filter province</h2>
<div id="question-7" class="section level3">
<h3>Question</h3>
<p>Look through the values in the <code>Province</code> column, and pick a province that you like. It’s most fun if everyone in your group picks a different province, so you can look at the differences afterwarnds. Save the name of this province to a variable called <code>prov</code>.</p>
<p>Modify the code from the previous question so it will only show the cases from the province you picked.</p>
</div>
<div id="hint-1-7" class="section level3">
<h3>Hint 1</h3>
<p>You can use the pipe operator <code>%&gt;%</code> to modify the dataset with funcions before using it for the plot. In this case, you want to modify it to only filter out cases where the province is equal to your <code>prov</code> variable.</p>
</div>
<div id="hint-2-7" class="section level3">
<h3>Hint 2</h3>
<p>If you don’t know how to filter certain cases in your dataframe, try googling <a href="https://www.google.com/search?q=R%20filter%20cases%20in%20dataframe"><em>R filter cases in dataframe</em></a></p>
</div>
<div id="answer-7" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>prov &lt;- &quot;Overijssel&quot; #Instead of &quot;Overijssel, you could use a different province of course&quot;
COVID_cases_clean %&gt;%
  filter(Province == prov) %&gt;%
  ggplot(aes(x = Agegroup)) +
  geom_bar()</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
</div>
<div id="styling-your-graphs" class="section level2 tabset tabset-pills">
<h2>5.3 Styling your graphs</h2>
<div id="question-8" class="section level3">
<h3>Question</h3>
<p>To make your graph more fancy, try to give the bars of your barchart a nice color and change the axis labels and titel of the graph</p>
</div>
<div id="hint-1-8" class="section level3">
<h3>Hint 1</h3>
<p>If you don’t know how to change the color, try googling <a href="https://www.google.com/search?q=change%20color%20of%20ggplot%20bar%20chart"><em>change color of ggplot bar chart</em></a><br />
If you don’t know how to add labels, try googling <a href="https://www.google.com/search?q=ggplot%20modify%20labels"><em>ggplot modify labels</em></a></p>
</div>
<div id="hint-2-8" class="section level3">
<h3>Hint 2</h3>
<p>You can change for each aestatic how it looks, by adding extra parameters to the <code>geom_bar()</code> function, for example <code>fill</code> or <code>color</code>.</p>
</div>
<div id="hint-3-4" class="section level3">
<h3>Hint 3</h3>
<p>You can use the <code>labs()</code> function to add labels. Use <code>?labs</code> to find out how it works.</p>
</div>
<div id="answer-8" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean %&gt;%
  filter(Province == prov) %&gt;%
  ggplot(aes(x = Agegroup)) +
  geom_bar(fill=&quot;Purple&quot;) + # Instead of purple, you could use a different color
  labs(title = &quot;Age distribuation of corona patients in Overijssel&quot;, x = &quot;Age group&quot;, y = &quot;Positive cases&quot;)</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
</div>
<div id="creating-a-piechart" class="section level2 tabset tabset-pills">
<h2>5.4 Creating a piechart</h2>
<div id="question-9" class="section level3">
<h3>Question</h3>
<p>Try to create a pie chart using the <code>ggplot()</code> function that shows the genders of all positive tested cases.</p>
<p>Feel free to add some labels to make it clearer</p>
</div>
<div id="hint-1-9" class="section level3">
<h3>Hint 1</h3>
<p>There is no specific function to create a pie-chart. However, it is possible to bend any graph into a circle. To do that, you can use the <code>coord_polar()</code> function. Use <code>?coord_polar</code> to find out how this function works.</p>
<p>Your goal is to create a bar chart with only one bar, which is divided into colors based on the gender of the person.</p>
</div>
<div id="hint-2-9" class="section level3">
<h3>Hint 2</h3>
<p>When trying to make a bar chart with only one bar, you might be tempted to not set a <code>x</code> or a <code>y</code> variable, because you don’t want any variable on the x-axis, and the y-axis should be defined automatically by the aount of cases. However, this will give you this error message:</p>
<pre class="error"><code>Error: stat_count() requires an x or y aesthetic.</code></pre>
<p>It is required to have at least an <code>x</code> or <code>y</code> variable. To combat this problem, you can set the <code>x</code> variable to <code>""</code></p>
</div>
<div id="hint-3-5" class="section level3">
<h3>Hint 3</h3>
<p>The <code>color</code> variable only defines the line around the bar. The <code>fill</code> variable difenes the color of the bar itself</p>
</div>
<div id="hint-4-3" class="section level3">
<h3>Hint 4</h3>
<p>Use the aestatic mapping to link the <code>fill</code> aestatic to the <code>Sex</code> variable</p>
</div>
<div id="answer-9" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean %&gt;%
  filter(Province == prov) %&gt;%
  ggplot(aes(x = &quot;&quot;,fill = Sex)) +
  geom_bar() +
  coord_polar(&quot;y&quot;) +
  labs(title = &quot;Gender of positive COVID-19 cases&quot;)</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
</div>
<div id="create-histogram" class="section level2 tabset tabset-pills">
<h2>5.5 Create histogram</h2>
<div id="question-10" class="section level3">
<h3>Question</h3>
<p>Use the <code>ggplot()</code> function to create a histogram of the amount of positive cases over time in your chosen province.<br />
Feel free to add some colors and labels to make it look nice!</p>
</div>
<div id="hint-1-10" class="section level3">
<h3>Hint 1</h3>
<p>Copy and modify your code from the previous question, to make it easier. In this code, replace the linked variables in the aestetics map, and the graphing function.</p>
</div>
<div id="hint-2-10" class="section level3">
<h3>Hint 2</h3>
<p>You can use the function <code>geom_bar()</code> to create a barchart. Use <code>?geom_bar</code> to look up how to use this function.</p>
</div>
<div id="answer-10" class="section level3">
<h3>Answer</h3>
<pre class="r"><code>COVID_cases_clean %&gt;%
  filter(Province == prov) %&gt;%
  ggplot(aes(x = Date_statistics)) +
  geom_histogram(fill = &quot;blue&quot;) +
  labs(title = &quot;Positive corona cases over time in Overijssel&quot;, x = &quot;Date&quot;, y = &quot;Positive cases&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
</div>
</div>
<div id="set-bins" class="section level2 tabset tabset-pills">
<h2>5.6 Set bins</h2>
<div id="question-11" class="section level3">
<h3>Question</h3>
<p>During the previous excercise, you might have gotten the message</p>
<pre class="error"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p>Bins are basically the the bars in the histogram. If they have a small with you have a lot of smaller bars, and if you have a high width you have a few higher bars. Try to have every bar represent one week of data.</p>
</div>
<div id="hint-1-11" class="section level3">
<h3>Hint 1</h3>
<p>Try googling the message you got: <a href="https://www.google.com/search?q=%60stat_bin()%60+using+%60bins+%3D+30%60.+Pick+better+value+with+%60binwidth%60."><em>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</em></a></p>
</div>
<div id="hint-2-11" class="section level3">
<h3>Hint 2</h3>
<p>Look at the documentation with <code>?geom_boxplot</code> tos ee what the <code>binwith</code> and <code>bins</code> arguments do.</p>
</div>
<div id="hint-3-6" class="section level3">
<h3>Hint 3</h3>
<p>A week has 7 days. You probably already knew that, but just to be sure.</p>
</div>
<div id="answer-11" class="section level3">
<h3>Answer</h3>
<p>You can set the with of a bin with the <code>binwidth</code> argument to a value of 7 days, which is a week.</p>
<pre class="r"><code>COVID_cases_clean %&gt;%
  ggplot(aes(x = Date_statistics)) +
  geom_histogram(binwidth = 7, fill = &quot;blue&quot;) +
  labs(title = &quot;Positive corona cases over time in Overijssel&quot;, x = &quot;Date&quot;, y = &quot;Positive cases per week&quot;)</code></pre>
<p><img src="covid_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
<div id="be-creative" class="section level2">
<h2>6. Be creative</h2>
<p>Think of some more interesting graphs you would like to make, or try to find ways to make your current graphs more pretty! The possibilities are endless! Good luck!</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
